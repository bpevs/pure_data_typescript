{"version":3,"file":"index.js","sources":["../node_modules/tslib/tslib.es6.js","../source/elements/ContextMenu.ts","../source/elements/PDArray.ts","../source/elements/PDCanvas.ts","../source/elements/PDConnect.ts","../source/elements/PDCoords.ts","../source/constants.ts","../source/utilities/drawHelpers.ts","../source/elements/PDFloatatom.ts","../source/elements/PDMsg.ts","../source/elements/PDText.ts","../source/elements/PDObj.ts","../source/utilities/serialization.ts","../source/utilities/downloadPatch.ts","../source/utilities/loadPatch.ts","../source/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","const body = document.getElementsByTagName(\"body\")[0]\n\n\ninterface IContextMethod {\n  method: (...args: any[]) => void,\n  name: string,\n}\n\nexport class ContextMenu {\n  private ref: HTMLElement | null = null\n  private listeners: any[] = []\n\n  constructor() {\n    body.addEventListener(\"click\", this.removeMenu)\n  }\n\n  public render(xPos: number, yPos: number, items: IContextMethod[]) {\n    const menu = this.ref || document.createElement(\"div\")\n    menu.className = \"context-menu\"\n    menu.style.top = yPos + \"px\"\n    menu.style.left = xPos + \"px\"\n    const menuItems = items.map(({ name }, i) => `<li class=\"context-${i}\">${name}</li>`).join(\"\")\n    menu.innerHTML = `<ul>${menuItems}</ul>`\n\n    if (!this.ref) {\n      body.appendChild(menu)\n\n      items.forEach(({ method }: IContextMethod, i) => {\n        const ref = document.getElementsByClassName(`context-${i}`)[0]\n        if (ref) this.listeners.push(ref.addEventListener(\"click\", method))\n      })\n    }\n\n\n\n    this.ref = menu\n  }\n\n  private removeMenu = () => {\n    if (this.ref) {\n      body.removeChild(this.ref)\n      this.ref = null\n    }\n\n    if (this.listeners) {\n      this.listeners.forEach(listener => removeEventListener(\"click\", listener))\n    }\n  }\n}\n","/**\n * @class PDArray\n * @description Array of Numbers\n *\n * @example\n */\n\n\nexport class PDArray {\n  public readonly chunkType = \"X\"\n  public readonly elementType = \"array\"\n\n  public data: number[]\n  public name: string\n  public size: number\n  public format: string\n  public saveFlag: boolean\n\n  constructor([ name, size, format, saveFlag ]: string[]) {\n    this.data = []\n    this.name = String(name)\n    this.size = Number(size)\n    this.format = String(format)\n    this.saveFlag = Boolean(saveFlag)\n  }\n\n  public addData(data: string[]) {\n    this.data = this.data.concat(data.map(Number))\n  }\n\n  // TODO: This currently breaks for two reasons:\n  // - Need to format small numbers: 9.41753e-06\n  // - #A is often split into multiple lines. Not sure why yet. Probably Dimensions or size constraint.\n  public toString() {\n    const meta = `#X array ${this.name} ${this.size} ${this.format} ${this.saveFlag ? 1 : 0};\\r\\n`\n    const data = `#A ${this.data.join(\" \")}`\n    return meta + data\n  }\n}\n","/**\n * @class PDCanvas\n * @description Defines window properties\n *\n * @example\n */\n\n\n// TODO: Doesn't support initial path canvas declaration (different 1-off format)\nexport class PDCanvas {\n  public readonly chunkType = \"N\"\n  public readonly elementType = \"canvas\"\n  public readonly isSubPatch: boolean\n\n  public name: null | string\n  public openOnLoad: boolean\n  public xPos: number\n  public xSize: number\n  public yPos: number\n  public ySize: number\n\n  constructor([ xPos, yPos, xSize, ySize, name, openOnLoad ]: string[]) {\n    this.isSubPatch = isNaN(parseInt(name, 10))\n    this.name = this.isSubPatch ? name : null\n    this.xPos = Number(xPos)\n    this.yPos = Number(yPos)\n    this.xSize = Number(xSize)\n    this.ySize = Number(ySize)\n    this.openOnLoad = Boolean(openOnLoad)\n  }\n\n  public toString() {\n    return `#N canvas ${this.xPos} ${this.yPos} ${this.xSize} ${this.ySize} ${this.name} ${this.openOnLoad}`\n  }\n}\n","/**\n * @class PDConnect\n * @description Wires GUI-elements\n * Objects are virtually numbered in order of appearance in the file,\n * starting from zero. Inlets and outlets of the objects are numbered likewise.\n *\n * @example\n *  #X obj 30 27 midiin;\n *  #X obj 26 59 midiout;\n *  #X connect 0 0 1 0;\n *  #X connect 0 1 1 1;\n */\n\nexport class PDConnect {\n  public readonly chunkType = \"X\"\n  public readonly elementType = \"connect\"\n\n  public inlet: number\n  public outlet: number\n  public source: number\n  public target: number\n\n  constructor([ source, outlet, target, inlet ]: string[]) {\n    this.inlet = Number(inlet)\n    this.outlet = Number(outlet)\n    this.source = Number(source)\n    this.target = Number(target)\n  }\n\n  public toString() {\n    return `#X connect ${this.source} ${this.outlet} ${this.target} ${this.inlet}`\n  }\n}\n","/**\n * @class PDCoords\n * @description Visual ranges of a frameset (window)\n * A coords statement must always be preceded with a canvas statement which also holds the graph name.\n * starting from zero. Inlets and outlets of the objects are numbered likewise.\n *\n * @example\n *  #X obj 30 27 midiin;\n *  #X obj 26 59 midiout;\n *  #X connect 0 0 1 0;\n *  #X connect 0 1 1 1;\n */\n\nexport class PDCoords {\n  public readonly chunkType = \"X\"\n  public readonly elementType = \"coords\"\n\n  public graphOnParent: boolean\n  public height: number\n  public width: number\n  public xFrom: number\n  public xTo: number\n  public yFrom: number\n  public yTo: number\n\n  constructor([ xFrom, yTo, xTo, yFrom, width, height, graphOnParent ]: string[]) {\n    this.xFrom = Number(xFrom)\n    this.xTo = Number(xTo)\n    this.yFrom = Number(yFrom)\n    this.yTo = Number(yTo)\n    this.width = Number(width)\n    this.height = Number(height)\n    this.graphOnParent = Boolean(graphOnParent)\n  }\n\n  public toString() {\n    return `#X coords ${this.xFrom} ${this.yTo} ${this.xTo} ${this.yFrom}` +\n      ` ${this.width} ${this.height} ${this.graphOnParent ? 1 : 0}`\n  }\n}\n","const canvas: HTMLCanvasElement | any = document.getElementById(\"pd\")\nconst context = canvas.getContext(\"2d\")\nconst dpr = window.devicePixelRatio || 1\nconst bsr = context.webkitBackingStorePixelRatio ||\n  context.mozBackingStorePixelRatio ||\n  context.msBackingStorePixelRatio ||\n  context.oBackingStorePixelRatio ||\n  context.backingStorePixelRatio || 1\nconst PIXEL_RATIO = dpr / bsr\nconst OBJECT_HEIGHT = 18\n\ncanvas.width = window.innerWidth * PIXEL_RATIO\ncanvas.height = window.innerHeight * PIXEL_RATIO\ncanvas.style.width = window.innerWidth + \"px\"\ncanvas.style.height = window.innerHeight + \"px\"\ncontext.setTransform(PIXEL_RATIO, 0, 0, PIXEL_RATIO, 0, 0)\n\nexport {\n  canvas,\n  context,\n  OBJECT_HEIGHT,\n}\n","import { canvas, context as ctx, OBJECT_HEIGHT } from \"../constants\"\nimport { PDFloatatom, PDMsg, PDObj, PDText } from \"../elements\"\n\n\nexport type wireType = \"control\" | \"signal\"\n\n\n// Initialize draw settings\nctx.lineWidth = \"1\"\nctx.fillStyle = \"black\"\nctx.font = \"10pt monaco\"\nctx.fillText(\"Drop file to start\", window.innerWidth / 2.2, window.innerHeight / 2.8)\n\n\n// Determine the longest visual length item to render\nexport function getDisplayLength(drawText: string, inlets: string[], outlets: string[]) {\n  const textLength = drawText.length * 6 + 5\n  const inletLength = inlets.length * 20\n  const outletLength = outlets.length * 20\n  return Math.max(textLength, inletLength, outletLength)\n}\n\n\nexport function inlets(xPos: number, yPos: number, inlets: string[], outlets: string[]) {\n  const inletHeight = 3\n  const inletWidth = 8\n  const inletY = yPos\n  const outletY = yPos + OBJECT_HEIGHT - inletHeight\n  const inletDistance = length / inlets.length\n  const outletDistance = length / outlets.length\n\n  inlets.forEach((type: wireType, index: number) => {\n    if (type === \"signal\") {\n      ctx.fillRect(xPos + index * inletDistance, inletY, inletWidth, inletHeight)\n    } else {\n      ctx.strokeRect(xPos + index * inletDistance, inletY, inletWidth, inletHeight)\n    }\n  })\n\n  outlets.forEach((type: wireType, index: number) => {\n    if (type === \"signal\") {\n      ctx.fillRect(xPos + index * outletDistance, outletY, inletWidth, inletHeight)\n    } else {\n      ctx.strokeRect(xPos + index * outletDistance, outletY, inletWidth, inletHeight)\n    }\n  })\n}\n\n\nexport function rectOutline(xPos: number, yPos: number, length: number) {\n  ctx.strokeRect(xPos, yPos, Math.max(length + 10, 30), OBJECT_HEIGHT)\n}\n\n\nexport function renderPatch(patch: any[]) {\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n  patch.forEach(item => {\n    if (\n      item instanceof PDMsg\n      || item instanceof PDFloatatom\n      || item instanceof PDText\n      || item instanceof PDObj\n    ) item.render()\n  })\n}\n\n\nexport function text(xPos: number, yPos: number, text: string, size?: number) {\n  ctx.fillStyle = \"black\"\n  ctx.font = size ? `${size}pt monaco` : \"7pt monaco\"\n  ctx.fillText(text, xPos + 2, yPos + OBJECT_HEIGHT - 6)\n}\n","/**\n * @class PDFloatatom\n * @description Defines a number box\n * When the value of [upper_limit] minus the value of [lower_limit] is less than one,\n * or the [width] attribute is set to one, PureData resets these values both to zero.\n * Floatatom and symbolatom are the only elements that uses \"-\" characters to indicate\n * that no value has been assigned to its attributes [label], [receive] and [send].\n *\n *\n * @example\n *  #X floatatom 32 26 5 0 0 0 - - -;\n */\n\n\nimport { context as ctx, OBJECT_HEIGHT } from \"../constants\"\nimport * as draw from \"../utilities/drawHelpers\"\n\n\nexport class PDFloatatom {\n  public readonly chunkType = \"X\"\n  public readonly elementType = \"floatatom\"\n  public readonly color = \"black\"\n  public readonly inlets = [ \"control\" ]\n  public readonly outlets = [ \"signal\" ]\n\n  public lowerLimit: number\n  public label: string\n  public labelPos: number\n  public receive: string\n  public send: string\n  public upperLimit: number\n  public width: number\n  public xPos: number\n  public yPos: number\n\n  constructor([ xPos, yPos, width, lowerLimit, upperLimit, labelPos, label, receive, send ]: string[]) {\n    this.lowerLimit = Number(lowerLimit)\n    this.label = String(label)\n    this.labelPos = Number(labelPos)\n    this.receive = String(receive)\n    this.send = String(send)\n    this.upperLimit = Number(upperLimit)\n    this.width = Number(width)\n    this.xPos = Number(xPos)\n    this.yPos = Number(yPos)\n  }\n\n  public render() {\n    const displayText = this.label.replace(/\\\\/g, \"\")\n    const length = draw.getDisplayLength(displayText, this.inlets, this.outlets)\n\n    ctx.strokeStyle = this.color\n    drawOutline(this.xPos, this.yPos, length)\n    draw.text(this.xPos, this.yPos, displayText)\n    draw.inlets(this.xPos, this.yPos, this.inlets, this.outlets)\n  }\n\n  public toString() {\n    let str = `#X floatatom ${this.xPos} ${this.yPos} ${this.width}` +\n      ` ${this.lowerLimit} ${this.upperLimit} ${this.labelPos}`\n    str += (this.label || \"-\")\n    str += (this.receive || \"-\")\n    str += (this.send || \"-\")\n    return str\n  }\n}\n\n\n// Number box has a custom shaped outline\nfunction drawOutline(xPos: number, yPos: number, length: number) {\n  ctx.beginPath()\n  ctx.moveTo(xPos, yPos)\n  ctx.lineTo(xPos + length, yPos)\n  ctx.lineTo(xPos + length + 5, yPos + 5)\n  ctx.lineTo(xPos + length + 5, yPos + OBJECT_HEIGHT)\n  ctx.lineTo(xPos, yPos + OBJECT_HEIGHT)\n  ctx.lineTo(xPos, yPos)\n  ctx.stroke()\n}\n","/**\n * @class PDMsg\n * @description Defines a message\n *\n * @example\n *  #X msg 61 48 read audio.wav;\n */\n\n\nimport { context as ctx, OBJECT_HEIGHT } from \"../constants\"\nimport * as draw from \"../utilities/drawHelpers\"\n\n\nexport class PDMsg {\n  public readonly chunkType = \"X\"\n  public readonly elementType = \"msg\"\n  public readonly color = \"black\"\n  public readonly inlets = [ \"control\" ]\n  public readonly outlets = [ \"signal\" ]\n\n  public text: string // The content of the message\n  public xPos: number // Horizontal position within the window\n  public yPos: number // Vertical position within the window\n\n  constructor([ xPos, yPos, ...params ]: string[]) {\n    this.xPos = Number(xPos)\n    this.yPos = Number(yPos)\n    this.text = params.join(\" \")\n  }\n\n  public render() {\n    const displayText = this.text.replace(/\\\\/g, \"\")\n    const length = draw.getDisplayLength(displayText, this.inlets, this.outlets)\n\n    ctx.strokeStyle = this.color\n    drawMsgOutline(this.xPos, this.yPos, length)\n    draw.text(this.xPos, this.yPos, displayText)\n    draw.inlets(this.xPos, this.yPos, this.inlets, this.outlets)\n  }\n\n  public toString() {\n    return `#X msg ${this.xPos} ${this.yPos} ${this.text}`\n  }\n}\n\n\n// Message box has a custom shaped outline\nfunction drawMsgOutline(xPos: number, yPos: number, length: number) {\n  ctx.beginPath()\n  ctx.moveTo(xPos, yPos)\n  ctx.lineTo(xPos + length + 5, yPos)\n  ctx.lineTo(xPos + length, yPos + (OBJECT_HEIGHT / 4))\n  ctx.lineTo(xPos + length, yPos + (OBJECT_HEIGHT * 3 / 4))\n  ctx.lineTo(xPos + length + 5, yPos + OBJECT_HEIGHT)\n  ctx.lineTo(xPos, yPos + OBJECT_HEIGHT)\n  ctx.lineTo(xPos, yPos)\n  ctx.stroke()\n}\n","import { context as ctx } from \"../constants\"\nimport * as draw from \"../utilities/drawHelpers\"\n\n\n/**\n * @class PDtext\n * @description Defines a message\n *\n * @example\n *  #X text 61 48 read audio.wav;\n */\n\n\nexport class PDText {\n  public readonly chunkType = \"X\"\n  public readonly elementType = \"text\"\n\n  public text: string // The content of the message\n  public xPos: number // Horizontal position within the window\n  public yPos: number // Vertical position within the window\n\n  constructor([ xPos, yPos, ...params ]: string[]) {\n    this.xPos = Number(xPos)\n    this.yPos = Number(yPos)\n    this.text = params.join(\" \")\n  }\n\n  public render() {\n    const displayText = this.text.replace(/\\\\/g, \"\")\n\n    ctx.strokeStyle = \"black\"\n    draw.text(this.xPos, this.yPos, displayText)\n  }\n\n  public toString() {\n    return `#X text ${this.xPos} ${this.yPos} ${this.text}`\n  }\n}\n","/**\n * @class PDObject\n * @description An object\n *\n *\n * @example\n *  #X obj 30 27 midiin;\n *  #X obj 26 59 midiout;\n */\n\n\nimport { context as ctx } from \"../constants\"\nimport * as draw from \"../utilities/drawHelpers\"\n\n\nexport class PDObj {\n  public readonly chunkType = \"X\"\n  public readonly elementType = \"obj\"\n  public readonly inlets = []\n  public readonly outlets = []\n  public readonly color = \"black\"\n  public length = 0\n\n  public xPos: number\n  public yPos: number\n  public name: string\n  public params: string[]\n\n  private displayText: string\n\n  constructor([ xPos, yPos, name, ...params ]: string[]) {\n    this.xPos = Number(xPos)\n    this.yPos = Number(yPos)\n    this.name = String(name || \"\")\n    this.params = params\n\n    this.displayText = this.name.replace(/\\\\/g, \"\")\n    this.length = draw.getDisplayLength(this.displayText, this.inlets, this.outlets)\n  }\n\n  public render() {\n    if (this.name !== \"cnv\") {\n      ctx.strokeStyle = this.color\n      draw.rectOutline(this.xPos, this.yPos, this.length)\n      draw.text(this.xPos, this.yPos, this.displayText)\n      draw.inlets(this.xPos, this.yPos, this.inlets, this.outlets)\n    } else {\n      const width = this.params[1]\n      const height = this.params[2]\n      const label = this.params[5] !== \"empty\" ? this.params[5] : \"\"\n      const xOff = Number(this.params[7])\n      const yOff = Number(this.params[8]) + 30\n      const fontSize = Number(this.params[9]) - 8\n      const backgroundColor = this.params[10]\n      ctx.fillStyle = parseColor(backgroundColor)\n      ctx.fillRect(this.xPos, this.yPos, width, height)\n      draw.text(this.xPos + xOff, this.yPos + yOff, label, fontSize)\n    }\n  }\n\n  public toString() {\n    return `#X msg ${this.xPos} ${this.yPos} ${this.name} ${this.params.join(\" \")}`\n  }\n}\n\n\n// Colors are 0-127, multiplied to separate, then added into big int\n// This func turns them into rgba(0-256, 0-256, 0-256)\nfunction parseColor(str: string) {\n  const num = Number(str).toString(2).slice(1).padStart(18, \"0\")\n  const r = parseInt(num.slice(0, 6), 2) * 4\n  const g = parseInt(num.slice(6, 12), 2) * 4\n  const b = Math.max(0, parseInt(num.slice(12), 2) * 4) || 256\n  return `rgb(${r}, ${g}, ${b})`\n}\n","/**\n * Utilities for parsing to and from*.pd files\n * It goes to and from text files to javascript classes\n * Based on unoffiicial spec: http://puredata.info/docs/developer/PdFileFormat\n * @param text *.pd file text\n */\n\n\nimport { PDArray, PDCanvas, PDConnect, PDCoords, PDFloatatom, PDMsg, PDObj, PDText } from \"../elements\"\nlet prev: PDArray | null = null\nlet subPatchName: string | null = null\n\n\nexport function deserializeFromFile(text: string) {\n  return text\n    .replace(/\\r/, \"\")\n    .split(/;\\n/)\n    .filter(Boolean)\n    .map(line => {\n      const [ chunk, element, ...params ] = line.substring(1).split(/\\s+/)\n\n      // Ignore subPatches for now\n      if (subPatchName) {\n        const endsGraph = subPatchName === \"(subpatch)\" && params[2] === \"graph\"\n        const endsSubPatch = element === \"restore\" && subPatchName === params[3]\n        if (!endsGraph && !endsSubPatch) return\n        subPatchName = null\n      }\n\n      if (prev && chunk === \"A\") {\n        // Special case; array's \"element\" type is included in prev line\n        prev.addData([ element, ...params ])\n        return\n      }\n\n      prev = null\n\n      if (chunk === \"N\" && element === \"canvas\") {\n        const canvas = new PDCanvas(params)\n        if (canvas.isSubPatch) subPatchName = canvas.name\n        return canvas\n      }\n\n      if (chunk === \"X\") {\n        switch (element) {\n          case \"array\":\n            prev = new PDArray(params)\n            return prev\n          case \"connect\": return new PDConnect(params)\n          case \"coords\": return new PDCoords(params)\n          case \"floatatom\": return new PDFloatatom(params)\n          case \"msg\": return new PDMsg(params)\n          case \"obj\": return new PDObj(params)\n          case \"text\": return new PDText(params)\n          default: return { chunk, element, params }\n        }\n      }\n\n      throw new Error(`invalid syntax, ${line}`)\n    }).filter(Boolean)\n}\n\n\nexport function serializeToFile(elements: any[]) {\n  return elements.map(el => el.chunkType\n    ? el.toString()\n    : [ \"#\", el.chunk, el.element ].concat(el.params).join(\" \"),\n  ).join(\";\\r\\n\") + \";\\r\\n\"\n}\n","import { serializeToFile } from \"./serialization\"\n\n\nexport function downloadPatch(patch: any[]) {\n  if (patch != null) {\n    const patchText = serializeToFile(patch)\n    const blob = new Blob([patchText], { type: \"application/octet-stream\" })\n    const blobURL = window.URL.createObjectURL(blob)\n    const tempLink = document.createElement(\"a\")\n    tempLink.style.display = \"none\"\n    tempLink.href = blobURL\n    tempLink.setAttribute(\"download\", \"patch.pd\")\n    if (typeof tempLink.download === \"undefined\") {\n      tempLink.setAttribute(\"target\", \"_blank\")\n    }\n\n    document.body.appendChild(tempLink)\n    tempLink.click()\n    document.body.removeChild(tempLink)\n    window.URL.revokeObjectURL(blobURL)\n  }\n}\n","export const loadPatch = (e: any) => {\n  e.stopPropagation()\n  e.preventDefault()\n  const files = e.dataTransfer.files // Array of all files\n  const file = files[0]\n\n  return new Promise(resolve => {\n    if (file && file.name.match(/\\.pd$/)) {\n      const reader = new FileReader()\n\n      reader.onload = (e2: any) => {\n        resolve(e2.target.result)\n      }\n\n      reader.readAsBinaryString(file) // start reading the file data.\n    }\n  })\n}\n\n","import { ContextMenu } from \"./elements/ContextMenu\"\nimport { downloadPatch } from \"./utilities/downloadPatch\"\nimport { renderPatch } from \"./utilities/drawHelpers\"\nimport { loadPatch } from \"./utilities/loadPatch\"\nimport { deserializeFromFile } from \"./utilities/serialization\"\n\n\nconst exportButton = document.getElementById(\"export\")\nconst patchCanvas = document.getElementById(\"pd\")\n\n\nlet patch: any[]\n\nif (exportButton) exportButton.addEventListener(\"click\", () => downloadPatch(patch))\n\n\nif (patchCanvas) {\n  // When dragging a file over canvas, update UI\n  patchCanvas.addEventListener(\"dragover\", (e: any) => {\n      e.stopPropagation()\n      e.preventDefault()\n      e.dataTransfer.dropEffect = \"copy\"\n  })\n\n  // When dropping a file over canvas, render it as a patch\n  patchCanvas.addEventListener(\"drop\", async (e: any) => {\n    const patchText = String(await loadPatch(e))\n    patch = deserializeFromFile(patchText)\n    renderPatch(patch)\n  })\n\n  // On right-click on canvas, render custom contextmenu\n  const menu = new ContextMenu()\n\n  patchCanvas.addEventListener(\"contextmenu\", (e: any) => {\n    e.stopPropagation()\n    e.preventDefault()\n\n    menu.render(e.pageX, e.pageY, [\n      { name: \"Properties\", method: () => { console.log(\"Properties\") } },\n      { name: \"Object ⌘1\", method: () => { console.log(\"Object ⌘1\") } },\n      { name: \"Message ⌘2\", method: () => { console.log(\"Message ⌘2\")} },\n      { name: \"Number ⌘3\", method: () => { console.log(\"Number ⌘3\")} },\n      { name: \"Symbol ⌘4\", method: () => { console.log(\"Symbol ⌘4\")} },\n      { name: \"Comment ⌘5\", method: () => { console.log(\"Comment ⌘5\")} },\n    ])\n  })\n}\n"],"names":["ctx","draw.getDisplayLength","draw.text","draw.inlets","draw.rectOutline"],"mappings":"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"}